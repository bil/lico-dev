<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YAML Configuration Reference &mdash; LiCoRICE  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Environment Variables" href="env_vars.html" />
    <link rel="prev" title="LiCoRICE API Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> LiCoRICE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../realtime.html">Why Realtime?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/licorice.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">LiCoRICE API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">YAML Configuration Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#models">Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config">Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signals">Signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules">Modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-model">Example Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">LiCoRICE CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">LiCoRICE Python API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basic/index.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LiCoRICE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">LiCoRICE API Reference</a></li>
      <li class="breadcrumb-item active">YAML Configuration Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/yaml_config.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="yaml-configuration-reference">
<h1>YAML Configuration Reference<a class="headerlink" href="#yaml-configuration-reference" title="Permalink to this heading"></a></h1>
<p>LiCoRICE uses YAML configuration files to specify the model that will be constructed and run.</p>
<section id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this heading"></a></h2>
<p>Models define the architecture of your realtime analysis pipeline from data
acquisition (sources) to processing (modules) to output (sinks). Models are
defined through <a class="reference external" href="https://www.cloudbees.com/blog/yaml-tutorial-everything-you-need-get-started">yaml</a>
files and are broken up into the following sections:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#config"><span class="std std-ref">Config</span></a></p></li>
<li><p><a class="reference internal" href="#signals"><span class="std std-ref">Signals</span></a></p></li>
<li><p><a class="reference internal" href="#modules"><span class="std std-ref">Modules</span></a></p></li>
</ul>
<section id="config">
<h3>Config<a class="headerlink" href="#config" title="Permalink to this heading"></a></h3>
<p>High-level configuration variables are set by the user here. Here we define aspects of the setup, timing, and ticks(our metric of time) in order to control the way our system interacts with the real world.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tick_len</p></td>
<td><p>Realtime clock frequency in microseconds</p></td>
</tr>
<tr class="row-odd"><td><p>num_ticks</p></td>
<td><p>Number of ticks to run the model for. Defaults to -1
(indefinite)</p></td>
</tr>
<tr class="row-even"><td><p>sys_mask</p></td>
<td><p>CPU bitmask indicating which cores are available for
system processes to run on. Defaults to CPU0 (e.g., 0x1) in
realtime mode and all cores (e.g., 0xff for 8 cores) or no
action in non-realtime mode.</p></td>
</tr>
<tr class="row-odd"><td><p>lico_mask</p></td>
<td><p>CPU bitmask indicating which cores are available for
LiCoRICE to run on. Defaults to all cores besides the system
core in realtime mode (e.g., 0xfe for 8 cores) and all cores
in non-realtime mode.</p></td>
</tr>
<tr class="row-even"><td><p>source_init_ticks</p></td>
<td><p>Number of ticks to run sources before modules start</p></td>
</tr>
<tr class="row-odd"><td><p>module_init_ticks</p></td>
<td><p>Number of ticks to run sources and modules before
sinks start</p></td>
</tr>
</tbody>
</table>
</section>
<section id="signals">
<h3>Signals<a class="headerlink" href="#signals" title="Permalink to this heading"></a></h3>
<p>Here we define how data will be passed between our modules. We also define how much of this data to keep over time and how to store it if necessary for our use case. At a high-level, signals are represented as NumPy arrays in our modules. However, in implementation, they are actually shared arrays, shared memory that allows for the fast transfer of data between models required for realtime analysis.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>shape</p></td>
<td><p>The shape of the numpy signal as a tuple (single tick)</p></td>
</tr>
<tr class="row-odd"><td><p>dtype</p></td>
<td><p>The dtype of the numpy signal</p></td>
</tr>
<tr class="row-even"><td><p>history</p></td>
<td><p>Number of ticks of data to store in memory</p></td>
</tr>
<tr class="row-odd"><td><p>latency</p></td>
<td><p>Fixed latency to introduce to ndarray indexing.</p></td>
</tr>
<tr class="row-even"><td><p>log</p></td>
<td><p>bool specifying whether or not to log the signal or dict
specifying log arguments</p></td>
</tr>
</tbody>
</table>
</section>
<section id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this heading"></a></h3>
<p>Modules are the primary building blocks of LiCoRICE. Here we define the name of our module, the language it’s in (Python or C), what signals, if any, will be streaming in, and what signals, if any, will be streaming out. We also define whether this module will use a parser to read or write external signals, a constructor to prepare data or initialize processes, or a destructor to stop processes or clean data.</p>
<p>LiCoRICE will automatically detect whether a module is a source, sink, or
internal module given the signals attributed to that module.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>language</p></td>
<td><p>The programming language used to write the module (Python or C)</p></td>
</tr>
<tr class="row-odd"><td><p>constructor</p></td>
<td><p>Indicates that a constructor is used to initialize the module</p></td>
</tr>
<tr class="row-even"><td><p>parser</p></td>
<td><p>Indicates that a parser is used for tick-level code (only for
sources and sinks)</p></td>
</tr>
<tr class="row-odd"><td><p>destructor</p></td>
<td><p>Indicates that a destructor is used to teardown resources</p></td>
</tr>
<tr class="row-even"><td><p>in</p></td>
<td><p>Defines module and sink inputs as an array. Defines source input
as a dict</p></td>
</tr>
<tr class="row-odd"><td><p>out</p></td>
<td><p>Defines module and source outputs as an array. Defines sink output
as a dict</p></td>
</tr>
</tbody>
</table>
<section id="external-signals">
<h4>External Signals<a class="headerlink" href="#external-signals" title="Permalink to this heading"></a></h4>
<p>External signals are information that is passed in and out of our model. Having an external signal is what defines modules as either a sink or a source(any module should only ever have one). Given the inherent complexity of dealing with external devices or applications, additional information is needed to define these signals.</p>
</section>
</section>
</section>
<section id="example-model">
<h2>Example Model<a class="headerlink" href="#example-model" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">tick_len</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span><span class="w"> </span><span class="c1"># in microseconds (0.1s)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="c1"># number of ticks to run for; defaults to -1 (run until terminated by the user)</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nt">num_ticks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nt">signals</span><span class="p">:</span><span class="w"></span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w">  </span><span class="nt">signal_1</span><span class="p">:</span><span class="w"></span>
<span class="linenos">11</span><span class="w">    </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(2, 2)</span><span class="w"> </span><span class="c1"># All signals are be treated as numpy arrays</span><span class="w"></span>
<span class="linenos">12</span><span class="w">    </span><span class="nt">dtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float64</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="nt">history</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"> </span><span class="c1"># How much previous data to keep on the signal in the system</span><span class="w"></span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">  </span><span class="w w-Error"> </span><span class="nt">signal_2</span><span class="p">:</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"> </span><span class="c1"># Signals can also be 1D</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="nt">dtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float64</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="nt">modules</span><span class="p">:</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">  </span><span class="nt">sum_init</span><span class="p">:</span><span class="w"></span>
<span class="linenos">23</span><span class="w">      </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w">  </span><span class="c1"># can be C or python</span><span class="w"></span>
<span class="linenos">24</span><span class="w">      </span><span class="nt">constructor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True.</span><span class="w"> </span><span class="c1"># signifies we will use a constructor</span><span class="w"></span>
<span class="linenos">25</span><span class="w">      </span><span class="nt">in</span><span class="p">:</span><span class="w">   </span><span class="c1"># An External Signal (Joystick in USB)</span><span class="w"></span>
<span class="linenos">26</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joystick_raw</span><span class="w"></span>
<span class="linenos">27</span><span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"></span>
<span class="linenos">28</span><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pygame_joystick</span><span class="w"></span>
<span class="linenos">29</span><span class="w">        </span><span class="nt">schema</span><span class="p">:</span><span class="w"></span>
<span class="linenos">30</span><span class="w">            </span><span class="nt">max_packets_per_tick</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"> </span><span class="c1"># defaults to 1 for sync, None for async</span><span class="w"></span>
<span class="linenos">31</span><span class="w">            </span><span class="nt">data</span><span class="p">:</span><span class="w"></span>
<span class="linenos">32</span><span class="w">                </span><span class="nt">dtype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span><span class="w"></span>
<span class="linenos">33</span><span class="w">                </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="linenos">34</span><span class="w">      </span><span class="nt">out</span><span class="p">:</span><span class="w"></span>
<span class="linenos">35</span><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">signal_1</span><span class="w"></span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">  </span><span class="w w-Error">  </span><span class="nt">sum</span><span class="p">:</span><span class="w"></span>
<span class="linenos">38</span><span class="w">        </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="linenos">39</span><span class="w">        </span><span class="nt">in</span><span class="p">:</span><span class="w"></span>
<span class="linenos">40</span><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">signal_1</span><span class="w"></span>
<span class="linenos">41</span><span class="w">        </span><span class="nt">out</span><span class="p">:</span><span class="w"></span>
<span class="linenos">42</span><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">signal_2</span><span class="w"></span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="w">    </span><span class="nt">sum_print</span><span class="p">:</span><span class="w"></span>
<span class="linenos">45</span><span class="w">        </span><span class="nt">language</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class="w"></span>
<span class="linenos">46</span><span class="w">        </span><span class="nt">in</span><span class="p">:</span><span class="w"></span>
<span class="linenos">47</span><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">signal_2</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="LiCoRICE API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="env_vars.html" class="btn btn-neutral float-right" title="Environment Variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The Board of Trustees of the Leland Stanford Junior University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>